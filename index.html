<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Progress â€¢ PDFs</title>
  <style>
    :root { --bg:#0d1117; --fg:#c9d1d9; --muted:#8b949e; --accent:#58a6ff; }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font:16px/1.5 system-ui,Segoe UI,Inter,Arial,sans-serif}
    a{color:var(--accent);text-decoration:none} a:hover{text-decoration:underline}
    main{max-width:820px;margin:0 auto;padding:2rem 1rem}
    h1{margin:0 0 1rem;font-size:1.6rem}
    p.meta{color:var(--muted);margin:.25rem 0 1.25rem}
    ul{list-style:none;padding:0;margin:0}
    li{padding:.5rem .75rem;border-bottom:1px solid #30363d;display:flex;gap:.75rem;justify-content:space-between;align-items:baseline}
    .name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
    .right a{font-size:.95rem}
  </style>
</head>
<body>
<main>
  <h1>PDFs in ellenli/progress</h1>
  <p class="meta">Alphabetical list with download links. Auto-updates from the default branch.</p>
  <ul id="list" aria-live="polite"></ul>
</main>

<script>
(async () => {
  const OWNER = "ellenli";
  const REPO  = "progress";

  async function getDefaultBranch() {
    const r = await fetch(`https://api.github.com/repos/${OWNER}/${REPO}`);
    if (!r.ok) throw new Error('repo');
    const meta = await r.json();
    return meta.default_branch || 'main';
  }

  async function getPDFs(branch){
    const r = await fetch(`https://api.github.com/repos/${OWNER}/${REPO}/git/trees/${encodeURIComponent(branch)}?recursive=1`);
    if (!r.ok) throw new Error('tree');
    const data = await r.json();
    return (data.tree || [])
      .filter(n => n.type === 'blob' && /\.pdf$/i.test(n.path))
      .map(n => ({
        path: n.path,
        name: n.path.split('/').pop(),
        blob: `https://github.com/${OWNER}/${REPO}/blob/${branch}/${n.path}`,
        raw:  `https://raw.githubusercontent.com/${OWNER}/${REPO}/${branch}/${n.path}`
      }))
      .sort((a,b)=> a.name.localeCompare(b.name, undefined, {sensitivity:'base'}));
  }

  const list = document.getElementById('list');
  function render(items){
    list.innerHTML = items.map(f => (
      `<li>
         <span class="name"><a href="${f.blob}" target="_blank" rel="noopener">${f.name}</a></span>
         <span class="right"><a href="${f.raw}" download>Download</a></span>
       </li>`
    )).join('');
  }

  try {
    const branch = await getDefaultBranch();
    const files = await getPDFs(branch);
    render(files);
  } catch(e) {
    list.innerHTML = '<li>Unable to load list.</li>';
  }
})();
</script>
</body>
</html>
